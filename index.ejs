<!DOCTYPE html>
<html lang="ja">

    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <title>ミニメッセージボード</title>
        <script>
            function init(){
                var id = localStorage.getItem('id');
                if(id == null){
                    location.href = './login';
                }
                document.querySelector('#id').textContent = 'ID:' + id;
                document.querySelector('#id_input').value = id;
            }
        </script>
    </head>

    <body onload="init();">
        <header>
            <h1>メッセージボード</h1>
        </header>
        <div role="main">
            <p>※メッセージは最大10個まで保管されます。</p>
            <form method="post" action="/">
                <p id="id"></p>
                <input type="hidden" id="id_input" name="id">
                <div>
                    <label for="msg">Message</label>
                    <input type="text" name="msg" id="msg">
                </div>
                <input type="submit" value="送信">
            </form>

            <table>
                <% for(var i in data){ %>
                <%- include('data_item', {val:data[i]}) %>
                <% } %>
            </table>
        </div>
    </body>
    
</html>